<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Sessions Session 1 - Bash</title>

    <meta name="description" content="A session about Bash basics.">
    <meta name="author" content="Mohamed Bassem">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="../reveal-template/css/reveal.css">
    <link rel="stylesheet" href="../reveal-template/css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="../reveal-template/lib/css/zenburn.css">

    <style>
      code{
        padding: 15px !important;
      }
    </style>

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '../reveal-template/css/print/pdf.css' : '../reveal-template/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
      <script src="../reveal-template/lib/js/html5shiv.js"></script>
      <![endif]-->
  </head>

  <body>

    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section class="center">
          <h1>Seniors Session 1</h1>
          <h3>Bash Scripting</h3>
          <p class="fragment">
          <small>A.K.A. Finishing the Advanced Computer Lab in one slot 101</small>
          </p>
        </section>


        <section>
          <h3>Advanced Computer Lab</h3>
          <div>
            <img src="imgs/dict.png" />
          </div>
          <div>
            <img src="imgs/list-all-phonemes.png" />
          </div>
          <span class="fragment" >It's a bash one liner!</span>
        </section>

        <section>
          <h3>Creating 100 directories?</h3>
          <img src="imgs/100dirs.png" />
          <span class="fragment" >Also a bash one liner</span>
        </section>

        <section>
          <h3>Listing the movies you have</h3>
          <img src="imgs/movies.png" />
          <span class="fragment" >Also a bash one liner</span>
        </section>


        <section>
          <h3>Why to learn Bash?</h3>
          <div style="text-align: left;">
            <br />
            <br />
            <ul>
              <li class="fragment">Automating some of the tasks you'll face.</li>
              <li class="fragment">Makes your life much easier when using ubuntu's terminal.</li>
              <li class="fragment">Remote Sessions on Servers.</li>
              <li class="fragment">It looks cool!</li>
            </ul>
            <br />
            <p class="fragment">You can do literally anything you can do with the mouse using the terminal.</p>
          </div>
        </section>

        <section class="center">
          <h2>Ok, Let's start</h2>
        </section>


        <section>
          <h3>Outline</h3>
          <div style="text-align: left;">
            <br />
            <ul>
              <li>Navigating The File System</li>
              <li>Some useful commands</li>
              <li>Redirections</li>
              <li>Piping</li>
              <li>Live Examples</li>
              <li>Writing Scripts</li>
            </ul>
          </div>
        </section>
        <section>
          <h3>Command Structure</h3>
          <br />
          <div style="text-align: left;">
          <pre><code style="text-align: center;">
$ echo -e -n "Hello World"
          </code></pre>
          <br />
          <div style="text-align: left;">
            <ul>
              <li>echo : The command we are running</li>
              <li>-e -n : The command flags and options</li>
              <li>"Hello World" : The command arguments</li>
            </ul>
          </div>
        </section>

        <section>
          <h3>Filesystem Structure</h3>
          <div>
            <img src="imgs/filesystem.png" />
          </div>
          <small>Image Source : <a href="http://onestep91.blogspot.com.eg/2013/07/about-linux-file-system-structure.html">Here</a> </small>
        </section>

        <section>
          <h3>Relative Paths</h3>
          <div>
            <img src="imgs/filesystem-relative.png" />
          </div>
          <pre><code style="text-align: center;">
$ cd work
          </code></pre>
        </section>

        <section>
          <h3>Absolute Paths</h3>
          <div>
            <img src="imgs/filesystem-absolute.png" />
          </div>
          <pre><code style="text-align: center;">
$ cd /usr/lib
          </code></pre>
        </section>


        <section>
          <h3>Up</h3>
          <div>
            <img src="imgs/filesystem-up.png" />
          </div>
          <pre><code style="text-align: center;">
$ cd ..
          </code></pre>
        </section>


        <section>
          <h3>Another example</h3>
          <div>
            <img src="imgs/filesystem-wd.png" />
          </div>
          <pre><code style="text-align: center;">
$ cd usr/lib # Error, why?
          </code></pre>
        </section>


        <section>
          <h3>Another example</h3>
          <div>
            <img src="imgs/filesystem-up-twice.png" />
          </div>
          <pre><code style="text-align: center;">
$ cd ../../cory
          </code></pre>
        </section>


        <section>
          <h3>Useful commands</h3>

          <div class="fragment">
            <div style="text-align: left;">
              pwd : Prints the absolute path of the current directory
            </div>
            <pre ><code>$ pwd
/home/mohamedbassem/Desktop</code></pre>
            </div>

          <div class="fragment">
            <div style="text-align: left;">
              ls : Lists all the files/directories in a directory
            </div>
            <pre ><code>$ ls
file1.html file2.html hello.sh</code></pre>
            </div>

          <div class="fragment">
            <div style="text-align: left;">
              cp : Copies a file/directory to a certain destination
            </div>
            <pre ><code>$ cp file.html html/file.html</code></pre>
            </div>
        </section>



        <section>
          <h3>Useful commands</h3>

          <div class="fragment">
            <div style="text-align: left;">
              mv : Moves a file/directory to a certain destination
            </div>
            <pre ><code>$ mv file.html html/file.html
$ mv file1.html index.html # Renaming? </code></pre>
            </div>

          <div class="fragment">
            <div style="text-align: left;">
              echo : Prints the arguments it takes with a trailing new line
            </div>
            <pre ><code>$ echo "Hello World"
Hello World</code></pre>
            </div>

          <div class="fragment">
            <div style="text-align: left;">
              cat : Prints the content of a certain file
            </div>
            <pre ><code>$ cat hello.txt
Hello I'm a file.
And apparently I'm not empty.
...</code></pre>
            </div>
        </section>


        <section>
          <h3>Useful commands</h3>

          <div class="fragment">
            <div style="text-align: left;">
              rm : removes one or more files/directories
            </div>
            <pre ><code>$ rm file.html file2.html</code></pre>
            </div>

          <div class="fragment">
            <div style="text-align: left;">
              mkdir : Creates one or more directories.
            </div>
            <pre ><code>$ mkdir tests logs</code></pre>
            </div>

          <div class="fragment">
            <div style="text-align: left;">
              curl : Issues an HTTP request to a certain endpoint and prints the response to stdout
            </div>
            <pre ><code>$ curl http://google.com</code></pre>
            </div>
        </section>


        <section>
          <h3>Sort</h3>

          <div style="text-align: left;">
            Sorts the content of the file lexicographically by default.<br/>
            To sort numerically you add the -n flag. <br/>
            To sort by a certain column use the -k <column> flag. <br/>
          </div>
          <pre><code>$ cat tmp.txt
1 Mohamed
3 Ahmed
2 Zaky</code></pre>
          <pre class="fragment"><code>$ sort -n -k 1 tmp.txt
1 Mohamed
2 Zaky
3 Ahmed</code></pre>
          <pre class="fragment"><code>$ sort -k 2 tmp.txt
3 Ahmed
1 Mohamed
2 Zaky</code></pre>
        </section>


        <section>
          <h3>Uniq</h3>

          <div style="text-align: left;">
            Uniq removes duplicate ADJECENT lines. To get uniq lines in the whole file usually we sort the file first.<br/>
          </div>
          <pre><code>$ cat tmp.txt
2
2
10
4
4
</code></pre>
          <pre class="fragment"><code>$ uniq tmp.txt
2
10
4</code></pre>

        </section>

        <section>
          <h3>grep</h3>

          <div style="text-align: left;">
            grep prints only lines in the files that match partially or completely a certain pattern.
          </div>
          <pre><code>cat tmp.txt
SOME
RANDOM
WORDS
HELLO</code></pre>
          <pre class="fragment" ><code>grep "OM" tmp.txt
SOME
RANDOM
</code></pre>
          <div class="fragment" style="text-align: left;">
            Using the -v flag will filter out the lines matching the pattern.
          </div>
          <pre class="fragment" ><code>grep -v "OM" tmp.txt
WORDS
HELLO
</code></pre>
        </section>


        <section>
          <h3>sed</h3>

          <div style="text-align: left;">
            We usually use sed for replacing patterns but it's much much more than this.
          </div>
          <pre><code>cat tmp.txt
SOME
RANDOM
WORDS
HELLOOO</code></pre>
          <pre class="fragment" ><code>sed 's/O/N/g' tmp.txt
SNME
RANDNM
WNRDS
HELLNNN</code></pre>
        </section>


        <section>
          <h3>Other Worth Mentioning Commands</h3>
          <div style="text-align: left;">
            <ul>
              <li>head</li>
              <li>tail</li>
              <li>awk</li>
              <li>touch</li>
              <li>wc</li>
            </ul>
          </div>
        </section>


        <section class="center">
          <h3>How can I remember all those flags?</h3>
          <small class="fragment" >You don't need to!</small>
        </section>


        <section>
          <h3>Help and Man pages</h3>

          <div style="text-align: left;">
            Most of the commands comes with a flag called "--help" or "-h" that will print how to use it. For example
          </div>
          <pre><code>$ grep --help
Usage: grep [OPTION]... PATTERN [FILE]...
Search for PATTERN in each FILE or standard input.
PATTERN is, by default, a basic regular expression (BRE).
Example: grep -i 'hello world' menu.h main.c
...</code></pre>

          <div style="text-align: left;">
            Most of those commands have also a manual that you can access by:
          </div>
          <pre><code>$ man echo</code></pre>
        </section>


        <section class="center">
          <h3>Redirections</h3>
        </section>


        <section>
          <h3>Processes</h3>
          <div>
            <img src="imgs/processes.png" />
          </div>

          <div style="text-align: left;">
            The three default "files" each process has:
            <ul>
              <li class="fragment">stdin(0): What you write in the terminal.</li>
              <li class="fragment">stdout(1): What gets printed in the console. (e.g. System.out.println())</li>
              <li class="fragment">stderr(2): Also printed in the console but indicates error. In eclipse for example it's printed in red. (e.g. Exceptions & System.err.println())</li>
            </ul>
          </div>
        </section>


        <section>
          <h3>Redirections</h3>
          <pre><code># Redirect the output of the command to out.txt
$ echo "Hello World" 1> out.txt

# Redirect stderr to /dev/null (Discard it)
$ some-command 2> /dev/null

# Replace stdin with a file
$ grep "pattern" 0< file.txt

# Appending to the file
$ echo "Hello World" 1>> out.txt

# Ignore any output/error from the command
$ some-command 1> /dev/null 2>&1</code></pre>
          <div style="text-align: left;">
              Note: You don't have to write the descriptor number in case of stdout and stdin and usually we don't write them. So use "&gt;" and "&lt;" directly for redirecting stdout and stdin respectively.
          </div>
        </section>

        <section class="center">
          <img style="background: none; border: 0px;box-shadow: 0 0 0;" src="imgs/tada.png" />
          <img style="background: none; border: 0px;box-shadow: 0 0 0;" src="imgs/tada.png" />
          <h3>Piping</h3>
          <img style="background: none; border: 0px;box-shadow: 0 0 0;" src="imgs/tada.png" />
          <img style="background: none; border: 0px;box-shadow: 0 0 0;" src="imgs/tada.png" />
        </section>

        <section>
          <h3>Piping</h3>

          <div>
            <img src="imgs/piping.png" />
          </div>

          <div style="text-align: left;">
            <p>Piping is a special type of redirection where stdout of a process is redirected to the stdin of another process.</p>
          </div>
        </section>


        <section>
          <h3>Piping Example</h3>

          <div style="text-align: left;">
            Print all the files ending with ".txt" in the current directory
          </div>

          <pre><code>$ ls
file.ext game.ext README.md test.txt example.txt

$ ls | grep "\.txt$"
test.txt
example.txt</code></pre>

        </section>



        <section class="center">
          <h3>Back to our example</h3>
        </section>

        <section>
          <h3>Advanced Computer Lab Revisited</h3>
          <div>
            <img src="imgs/dict.png" />
          </div>
          <div>
            <img src="imgs/list-all-phonemes.png" />
            <img class="fragment" src="imgs/file-struct-question.png" />
          </div>
        </section>


        <section>
          <h3>What tools do we have?</h3>
          <div style="text-align: left;">
            <ul>
              <li class="fragment">Printing Files.</li>
              <li class="fragment">Filter out lines matching a pattern.</li>
              <li class="fragment">Replacing patterns.</li>
              <li class="fragment">Removing columns.</li>
              <li class="fragment">Sorting</li>
              <li class="fragment">Uniq</li>
              <li class="fragment">Taking the first/last n lines from a file</li>
            </ul>
          </div>
        </section>


        <section class="center">
          <h3>Let's do it live.</h3>
        </section>


        <section>
          <h3>Another Live Example</h3>
          <div style="text-align: left;">
            Assume you have the following CSV hosted <a href="resources/grades.csv">here</a> that represents the grades of some students in the class. Print the name of student with the highest grade, for simplicity assume that there won't be two students with the same grade.
          </div>
          <pre><code style="text-align: left;">name,percentage
Ahmed,30
Mohamed,60
Khaled,20
Yusuf,80
Noha,0
So3ad,90</code></pre>
          <div class="fragment" style="text-align: left;">
            What about writing it to a file instead of printing it?
          </div>
        </section>


        <section class="center">
          <h3>Bash scripts</h3>
        </section>

        <section>
          <h3>Variables and Conditions</h3>
          <pre><code style="text-align: left;">#!/bin/bash

VAL=$((1+2));
if [ $VAL -eq 3 ]; then
  echo "YES 3";
elif [ $VAL -lt 1 ]; then
  echo "YES LESS THAN 1";
else
  echo "NO IDEA";
fi</code></pre>
        </section>


        <section>
          <h3>Loops</h3>
          <pre><code style="text-align: left;">#!/bin/bash

NUMBER=1;
while [ $NUMBER -lt 10 ]; do
    echo "Number = $NUMBER"
    NUMBER=$((NUMBER + 1))
done

# Until also works

VAL="1 2 X 4"; # `ls` maybe ?
for i in $VAL; do
  echo $i;
done</code></pre>
        </section>


        <section>
          <h3>Functions</h3>
          <pre><code style="text-align: left;">#!/bin/bash

function greet {
  echo "Hello $1"
}

greet Mohamed</code></pre>

        <div style="text-align:left;">
          <br />
          Command line arguments and Function params are accessed by the special variable $[number].
        </div>
        </section>


        <section>
          <h3>Execution</h3>
          <div style="text-align:left;">
            Usually bash scripts have ".sh" file extension or no extension at all. Remember the Shebang? 
            <br />
            In order to execute you'll have to make the file executable first.
          </div>

          <pre><code style="text-align: left;"># We will understand this command in a later session
$ sudo chmod u+x script.sh
$ ./script.sh # That's a relative path
</code></pre>

        </section>


        <section>
          <h3>Exit Codes</h3>

          <div style="text-align:left;">
            How to know whether the command we just ran exited in success or failure?
          </div>
          <pre><code style="text-align: left;">#!/bin/bash

exit(0);
</code></pre>

        <div style="text-align:left;">
          <br />
          <ul>
            <li class="fragment">Exiting with zero means sucess, anything else is failure</li>
            <li class="fragment">You can check the exit status of the last executed command using the special var "$?"</li>
            <li class="fragment">Remember the loop condition?</li>
          </ul>
        </div>

        </section>


        <section>
          <h3>Conditions</h3>

          <pre><code style="text-align: left;">$ type [
[ is a shell builtin

$ man [

$ [ 2 -lt 3 ]
$ echo $?
0
$ [ 2 -lt 3 ] && [ 5 -lt 3 ]
$ echo $?
1
</code></pre>
        <br />
        <div style="text-align:left;">
          "[" itself is a command, that takes some flags representing the condition and exits with sucess if the condition is satisfied and failure otherwise.
        </div>

        </section>


        <section>
          <h3>Expansions</h3>

          <pre><code style="text-align: left;">$ echo test{1,3}
test1 test3

$ echo test{1..5}
test1 test2 test3 test4 test5

$ mkdir teams{1..100}

$ mv test.txt{,_old}
</code></pre>
        <br />
        <div style="text-align:left;">
          "[" itself is a command, that takes some flags representing the condition and exits with sucess if the condition is satisfied and failure otherwise.
        </div>
        </section>


        <section>
          <h3>Home Sweet Home</h3>

        <br />
        <div style="text-align:left;">

          <pre><code style="text-align: left;"># Both will switch to the home directory

$ cd ~
$ cd
</code></pre>
<br />
          <ul>
            <li>"~" is a special alias to your home directory "/home/&lt;username&gt;".</li>
            <li>The home directory contains the Desktop, Downloads, Documents and configurations.</li>
          </ul>
        </div>
        </section>


        <section>
          <h3>References</h3>

          <div style="text-align:left;">
            <ul>
              <li>
                <a href="http://learnxinyminutes.com/docs/bash/">
                  http://learnxinyminutes.com/docs/bash/
                </a>
              </li>
            </ul>
          </div>

        </section>

      </div>

    </div>

    <script src="../reveal-template/lib/js/head.min.js"></script>
    <script src="../reveal-template/js/reveal.js"></script>

    <script>
      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: false,
        history: true,
        center: false,

        transition: 'none', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: '../reveal-template/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../reveal-template/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../reveal-template/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../reveal-template/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: '../reveal-template/plugin/zoom-js/zoom.js', async: true },
          { src: '../reveal-template/plugin/notes/notes.js', async: true }
        ]
      });
    </script>

  </body>
</html>
